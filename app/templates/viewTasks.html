{% extends 'bootstrap/base.html' %}

{% include 'header.html' %}

{% block styles %}
{{super()}}
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
{% endblock %}

{% block content %}

<div class="container">
<div class="main">

<div class="content">
<h1>All Tasks</h1>



{% for task in tasks %}
<input type="checkbox" class="task" id="task" name="{{task.id}}">
<label for="{{task.id}}">{{ task.name }}</label><br />
{% endfor %}
<hr>
{% for task in completedTasks %}
<input type="checkbox" class="task" id="task" name="{{task.id}}" checked>
<label for="{{task.id}}">{{ task.name }}</label><br />
{% endfor %}

</div>
</div>

{% include 'sidebar.html' %}

</div>
{% endblock %}

{% block scripts %}
{{super()}}

<script>

$(document).ready(function(){
    $('.task').change(function() {
        var id = this['name']
        if(this.checked) {
            var checked = 'checked'
        } else {
            var checked = 'unchecked'
        }
        console.log(checked)
        $.ajax({
            url:'/check',
            method:'POST',
            data: {checked:checked, id:id},
            success:function(data){
                location.reload();
            }
        })
    })
})

</script>
{% endblock %}
